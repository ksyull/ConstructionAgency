<Window x:Class="ConstructionAgency.UserWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Проекты" Height="600" Width="920" WindowStartupLocation="CenterScreen"
        Background="Lavender"
        FontFamily="Segoe UI">
    <Grid Margin="12">
        <TabControl>
            <!-- Каталог проектов -->
            <TabItem Header="Каталог">
                <DockPanel>
                    <StackPanel DockPanel.Dock="Top" Orientation="Horizontal" Margin="0,0,0,8">
                        <TextBlock Text="Категория:" VerticalAlignment="Center" Margin="0,0,6,0" FontWeight="SemiBold"/>
                        <ComboBox x:Name="FilterCategoryBox" Width="220"
                                  DisplayMemberPath="Name" SelectedValuePath="CategoryId"
                                  SelectionChanged="FilterOrSort_Changed"
                                  FontFamily="Segoe UI"/>

                        <TextBlock Text="  Поиск:" VerticalAlignment="Center" Margin="8,0,6,0" FontWeight="SemiBold"/>
                        <TextBox x:Name="SearchBox" Width="220" TextChanged="FilterOrSort_Changed"
                                 FontFamily="Segoe UI"/>

                        <TextBlock Text="  Сортировка:" VerticalAlignment="Center" Margin="8,0,6,0" FontWeight="SemiBold"/>
                        <ComboBox x:Name="SortBox" Width="210" SelectionChanged="FilterOrSort_Changed"
                                  FontFamily="Segoe UI">
                            <ComboBoxItem Content="Дата: новые → старые" Tag="CreatedAt DESC" FontFamily="Segoe UI"/>
                            <ComboBoxItem Content="Дата: старые → новые" Tag="CreatedAt ASC" FontFamily="Segoe UI"/>
                            <ComboBoxItem Content="Название: A → Z"      Tag="Title ASC" FontFamily="Segoe UI"/>
                            <ComboBoxItem Content="Название: Z → A"      Tag="Title DESC" FontFamily="Segoe UI"/>
                        </ComboBox>

                        <Button Content="Сбросить" Margin="8,0,0,0" Click="ResetFilter_Click"
                                FontFamily="Segoe UI" FontWeight="SemiBold"/>
                        <Button Content="Подробнее" Margin="12,0,0,0" Click="OpenDetails_Click"
                                FontFamily="Segoe UI" FontWeight="SemiBold"/>
                        <Button Content="В избранное" Margin="6,0,0,0" Click="AddFavorite_Click"
                                FontFamily="Segoe UI" FontWeight="SemiBold"/>
                        <Button Content="Удалить из избранного" Margin="6,0,0,0" Click="RemoveFavorite_Click"
                                FontFamily="Segoe UI" FontWeight="SemiBold"/>
                    </StackPanel>

                    <DataGrid x:Name="UserProjectsGrid"
                              AutoGenerateColumns="False"
                              IsReadOnly="True"
                              SelectionMode="Single"
                              MouseDoubleClick="UserProjectsGrid_MouseDoubleClick"
                              FontFamily="Segoe UI"
                              Background="White"
                              BorderBrush="LightSteelBlue">
                        <DataGrid.Columns>
                            <DataGridTextColumn Header="ID"        Binding="{Binding ProjectId}" Width="60">
                                <DataGridTextColumn.HeaderStyle>
                                    <Style TargetType="DataGridColumnHeader">
                                        <Setter Property="FontWeight" Value="SemiBold"/>
                                        <Setter Property="Background" Value="LightSteelBlue"/>
                                    </Style>
                                </DataGridTextColumn.HeaderStyle>
                            </DataGridTextColumn>
                            <DataGridTextColumn Header="Title"     Binding="{Binding Title}"     Width="*">
                                <DataGridTextColumn.HeaderStyle>
                                    <Style TargetType="DataGridColumnHeader">
                                        <Setter Property="FontWeight" Value="SemiBold"/>
                                        <Setter Property="Background" Value="LightSteelBlue"/>
                                    </Style>
                                </DataGridTextColumn.HeaderStyle>
                            </DataGridTextColumn>
                            <DataGridTextColumn Header="CategoryId" Binding="{Binding CategoryId}" Width="120">
                                <DataGridTextColumn.HeaderStyle>
                                    <Style TargetType="DataGridColumnHeader">
                                        <Setter Property="FontWeight" Value="SemiBold"/>
                                        <Setter Property="Background" Value="LightSteelBlue"/>
                                    </Style>
                                </DataGridTextColumn.HeaderStyle>
                            </DataGridTextColumn>
                            <DataGridTextColumn Header="Status"    Binding="{Binding Status}"    Width="140">
                                <DataGridTextColumn.HeaderStyle>
                                    <Style TargetType="DataGridColumnHeader">
                                        <Setter Property="FontWeight" Value="SemiBold"/>
                                        <Setter Property="Background" Value="LightSteelBlue"/>
                                    </Style>
                                </DataGridTextColumn.HeaderStyle>
                            </DataGridTextColumn>
                            <DataGridTextColumn Header="CreatedAt" Binding="{Binding CreatedAt}" Width="160">
                                <DataGridTextColumn.HeaderStyle>
                                    <Style TargetType="DataGridColumnHeader">
                                        <Setter Property="FontWeight" Value="SemiBold"/>
                                        <Setter Property="Background" Value="LightSteelBlue"/>
                                    </Style>
                                </DataGridTextColumn.HeaderStyle>
                            </DataGridTextColumn>
                        </DataGrid.Columns>
                    </DataGrid>
                </DockPanel>
            </TabItem>

            <!-- Избранное -->
            <TabItem Header="Мои избранные">
                <DockPanel>
                    <StackPanel DockPanel.Dock="Top" Orientation="Horizontal" Margin="0,0,0,8">
                        <Button Content="Открыть" Click="OpenFavoriteDetails_Click"
                                FontFamily="Segoe UI" FontWeight="SemiBold"/>
                        <Button Content="Удалить из избранного" Margin="8,0,0,0" Click="RemoveFavoriteFromTab_Click"
                                FontFamily="Segoe UI" FontWeight="SemiBold"/>
                    </StackPanel>
                    <DataGrid x:Name="FavoritesGrid"
                              AutoGenerateColumns="False"
                              IsReadOnly="True"
                              SelectionMode="Single"
                              FontFamily="Segoe UI"
                              Background="White"
                              BorderBrush="LightSteelBlue">
                        <DataGrid.Columns>
                            <DataGridTextColumn Header="ID"        Binding="{Binding ProjectId}" Width="60">
                                <DataGridTextColumn.HeaderStyle>
                                    <Style TargetType="DataGridColumnHeader">
                                        <Setter Property="FontWeight" Value="SemiBold"/>
                                        <Setter Property="Background" Value="LightSteelBlue"/>
                                    </Style>
                                </DataGridTextColumn.HeaderStyle>
                            </DataGridTextColumn>
                            <DataGridTextColumn Header="Title"     Binding="{Binding Title}"     Width="*">
                                <DataGridTextColumn.HeaderStyle>
                                    <Style TargetType="DataGridColumnHeader">
                                        <Setter Property="FontWeight" Value="SemiBold"/>
                                        <Setter Property="Background" Value="LightSteelBlue"/>
                                    </Style>
                                </DataGridTextColumn.HeaderStyle>
                            </DataGridTextColumn>
                            <DataGridTextColumn Header="CategoryId" Binding="{Binding CategoryId}" Width="120">
                                <DataGridTextColumn.HeaderStyle>
                                    <Style TargetType="DataGridColumnHeader">
                                        <Setter Property="FontWeight" Value="SemiBold"/>
                                        <Setter Property="Background" Value="LightSteelBlue"/>
                                    </Style>
                                </DataGridTextColumn.HeaderStyle>
                            </DataGridTextColumn>
                            <DataGridTextColumn Header="Status"    Binding="{Binding Status}"    Width="140">
                                <DataGridTextColumn.HeaderStyle>
                                    <Style TargetType="DataGridColumnHeader">
                                        <Setter Property="FontWeight" Value="SemiBold"/>
                                        <Setter Property="Background" Value="LightSteelBlue"/>
                                    </Style>
                                </DataGridTextColumn.HeaderStyle>
                            </DataGridTextColumn>
                            <DataGridTextColumn Header="CreatedAt" Binding="{Binding CreatedAt}" Width="160">
                                <DataGridTextColumn.HeaderStyle>
                                    <Style TargetType="DataGridColumnHeader">
                                        <Setter Property="FontWeight" Value="SemiBold"/>
                                        <Setter Property="Background" Value="LightSteelBlue"/>
                                    </Style>
                                </DataGridTextColumn.HeaderStyle>
                            </DataGridTextColumn>
                        </DataGrid.Columns>
                    </DataGrid>
                </DockPanel>
            </TabItem>
        </TabControl>
    </Grid>
</Window>